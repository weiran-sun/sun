<html lang="en"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href="../../.././style.css"></link><link rel="icon" href="../../.././favicon.svg"></link><link rel="mask-icon" href="../../.././favicon.svg" color="#000000"></link><link rel="prefetch" href="../../.././/declarations/declaration-data.bmp" as="image"></link><title>Mathlib.Data.MLList.BestFirst</title><script defer="true" src="../../.././mathjax-config.js"></script><script defer="true" src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script defer="true" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>const SITE_ROOT="../../.././";</script><script>const MODULE_NAME="Mathlib.Data.MLList.BestFirst";</script><script type="module" src="../../.././jump-src.js"></script><script type="module" src="../../.././search.js"></script><script type="module" src="../../.././expand-nav.js"></script><script type="module" src="../../.././how-about.js"></script><script type="module" src="../../.././instances.js"></script><script type="module" src="../../.././importedBy.js"></script></head><body><input id="nav_toggle" type="checkbox"></input><header><h1><label for="nav_toggle"></label><span>Documentation</span></h1><h2 class="header_filename break_within"><span class="name">Mathlib</span>.<span class="name">Data</span>.<span class="name">MLList</span>.<span class="name">BestFirst</span></h2><form id="search_form"><input type="text" name="q" autocomplete="off"></input>&#32;<button id="search_button" onclick="javascript: form.action='../../.././search.html';">Search</button></form></header><nav class="internal_nav"><p><a href="#top">return to top</a></p><p class="gh_nav_link"><a href="https://github.com/leanprover-community/mathlib4/blob/90c0e186fd333cbdddbe0e5148aa3cd2d24dcf9a/Mathlib/Data/MLList/BestFirst.lean">source</a></p><div class="imports"><details><summary>Imports</summary><ul><li><a href="../../.././Init.html">Init</a></li><li><a href="../../.././Mathlib/Order/Estimator.html">Mathlib.Order.Estimator</a></li><li><a href="../../.././Batteries/Data/MLList/Basic.html">Batteries.Data.MLList.Basic</a></li><li><a href="../../.././Mathlib/Data/Prod/Lex.html">Mathlib.Data.Prod.Lex</a></li><li><a href="../../.././Mathlib/Data/Set/Finite/Range.html">Mathlib.Data.Set.Finite.Range</a></li></ul></details><details><summary>Imported by</summary><ul id="imported-by-Mathlib.Data.MLList.BestFirst" class="imported-by-list"></ul></details></div><div class="nav_link"><a class="break_within" href="#BestFirstNode"><span class="name">BestFirstNode</span></a></div><div class="nav_link"><a class="break_within" href="#BestFirstNode.estimate"><span class="name">BestFirstNode</span>.<span class="name">estimate</span></a></div><div class="nav_link"><a class="break_within" href="#instOrdBestFirstNode"><span class="name">instOrdBestFirstNode</span></a></div><div class="nav_link"><a class="break_within" href="#BestFirstQueue"><span class="name">BestFirstQueue</span></a></div><div class="nav_link"><a class="break_within" href="#BestFirstQueue.insertAndEject"><span class="name">BestFirstQueue</span>.<span class="name">insertAndEject</span></a></div><div class="nav_link"><a class="break_within" href="#BestFirstQueue.ensureFirstIsBest"><span class="name">BestFirstQueue</span>.<span class="name">ensureFirstIsBest</span></a></div><div class="nav_link"><a class="break_within" href="#BestFirstQueue.popWithBound"><span class="name">BestFirstQueue</span>.<span class="name">popWithBound</span></a></div><div class="nav_link"><a class="break_within" href="#BestFirstQueue.popWithPriority"><span class="name">BestFirstQueue</span>.<span class="name">popWithPriority</span></a></div><div class="nav_link"><a class="break_within" href="#BestFirstQueue.pop"><span class="name">BestFirstQueue</span>.<span class="name">pop</span></a></div><div class="nav_link"><a class="break_within" href="#BestFirstQueue.toMLListWithPriority"><span class="name">BestFirstQueue</span>.<span class="name">toMLListWithPriority</span></a></div><div class="nav_link"><a class="break_within" href="#BestFirstQueue.toMLList"><span class="name">BestFirstQueue</span>.<span class="name">toMLList</span></a></div><div class="nav_link"><a class="break_within" href="#impl"><span class="name">impl</span></a></div><div class="nav_link"><a class="break_within" href="#impl.go"><span class="name">impl</span>.<span class="name">go</span></a></div><div class="nav_link"><a class="break_within" href="#implMaxDepth"><span class="name">implMaxDepth</span></a></div><div class="nav_link"><a class="break_within" href="#bestFirstSearchCore"><span class="name">bestFirstSearchCore</span></a></div><div class="nav_link"><a class="break_within" href="#instOrderBotEq"><span class="name">instOrderBotEq</span></a></div><div class="nav_link"><a class="break_within" href="#bestFirstSearch"><span class="name">bestFirstSearch</span></a></div></nav><main>
<div class="mod_doc"><h1 class="markdown-heading" id="Best-first-search">Best first search <a class="hover-link" href="#Best-first-search">#</a></h1><p>We perform best first search of a tree or graph,
where the neighbours of a vertex are provided by a lazy list <code>α → <a href="../../.././Batteries/Data/MLList/Basic.html#MLList">MLList</a> m α</code>.</p><p>We maintain a priority queue of visited-but-not-exhausted nodes,
and at each step take the next child of the highest priority node in the queue.</p><p>This is useful in meta code for searching for solutions in the presence of alternatives.
It can be nice to represent the choices via a lazy list,
so the later choices don't need to be evaluated while we do depth first search on earlier choices.</p><p>Options:</p><ul>
<li><code>maxDepth</code> allows bounding the search depth</li>
<li><code>maxQueued</code> implements &quot;beam&quot; search,
by discarding elements from the priority queue when it grows too large</li>
<li><code>removeDuplicatesBy?</code> maintains an <code>RBSet</code> of previously visited nodes;
otherwise if the graph is not a tree nodes may be visited multiple times.</li>
</ul></div><div class="mod_doc"><p>We begin by defining a best-first queue of <code><a href="../../.././Batteries/Data/MLList/Basic.html#MLList">MLList</a></code>s.
This is a somewhat baroque data structure designed for the application in this file
(and in particularly for the implementation of <code>rewrite_search</code>).
If someone would like to generalize appropriately that would be great.</p><p>We want to maintain a priority queue of <code><a href="../../.././Batteries/Data/MLList/Basic.html#MLList">MLList</a> m β</code>, each indexed by some <code>a : α</code> with a priority.
(One could simplify matters here by simply flattening this out to a priority queue of pairs <code>α × β</code>,
with the priority determined by the <code>α</code> factor.
However the laziness of <code><a href="../../.././Batteries/Data/MLList/Basic.html#MLList">MLList</a></code> is essential to performance here:
we will extract elements from these lists one at a time,
and only when they at the head of the queue.
If another item arrives at the head of the queue,
we may not need to continue calculate the previous head's elements.)</p><p>To complicate matters, the priorities might be expensive to calculate,
so we instead keep track of a lower bound (where less is better) for each such <code>a : α</code>.
The priority queue maintains the <code><a href="../../.././Batteries/Data/MLList/Basic.html#MLList">MLList</a> m β</code> in order of the current best lower bound for the
corresponding <code>a : α</code>.
When we insert a new <code>α × <a href="../../.././Batteries/Data/MLList/Basic.html#MLList">MLList</a> m β</code> into the queue, we have to provide a lower bound,
and we just insert it at a position depending on the estimate.
When it is time to pop a <code>β</code> off the queue, we iteratively improve the lower bound for the
front element of the queue, until we decide that either it must be the least element,
or we can exchange it with the second element of the queue and continue.</p><p>A <code><a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstQueue">BestFirstQueue</a> prio ε m β maxSize</code> consists of an <code>TreeMap</code>,
where the keys are in <code><a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstNode">BestFirstNode</a> prio ε</code>
and the values are <code><a href="../../.././Batteries/Data/MLList/Basic.html#MLList">MLList</a> m β</code>.</p><p>A <code><a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstNode">BestFirstNode</a> prio ε</code> consists of a <code><a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstNode.key">key</a> : α</code> and an estimator <code>ε : <a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstNode.key">key</a></code>.
Here <code>ε</code> provides the current best lower bound for <code>prio <a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstNode.key">key</a> : <a href="../../.././Init/Core.html#Thunk">Thunk</a> ω</code>.
(The actual priority is hidden behind a <code><a href="../../.././Init/Core.html#Thunk">Thunk</a></code> to avoid evaluating it, in case it is expensive.)</p><p>We ask for the type classes <code><a href="../../.././Mathlib/Order/Defs/LinearOrder.html#LinearOrder">LinearOrder</a> ω</code> and <code>∀ a : α, <a href="../../.././Mathlib/Order/Estimator.html#Estimator">Estimator</a> (prio a) (ε a)</code>.
This later typeclass ensures that we can always produce progressively better estimates
for a priority. We also need a <code><a href="../../.././Init/WF.html#WellFounded">WellFounded</a></code> instance to ensure that improving estimates terminates.</p><p>This whole structure is designed around the problem of searching rewrite graphs,
prioritising according to edit distances (either between sides of an equation,
or from a goal to a target). Edit distance computations are particularly suited to this design
because the usual algorithm for computing them produces improving lower bounds at each step.</p><p>With this design, it is okay if we visit nodes with very large edit distances:
while these would be expensive to compute, we never actually finish the computation
except in cases where the node arrives at the front of the queue.</p></div><div class="decl" id="BestFirstNode"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/90c0e186fd333cbdddbe0e5148aa3cd2d24dcf9a/Mathlib/Data/MLList/BestFirst.lean#L85-L91">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstNode"><span class="name">BestFirstNode</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../../.././foundational_types.html">Sort</a> u_1}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">ω</span> : <a href="../../.././foundational_types.html">Type</a> u_2}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">prio</span> : <span class="fn"><span class="fn">α</span> → <span class="fn"><a href="../../.././Init/Core.html#Thunk">Thunk</a> <span class="fn">ω</span></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">ε</span> : <span class="fn"><span class="fn">α</span> → <a href="../../.././foundational_types.html">Type</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../.././foundational_types.html">Sort</a> (max 1 u_1)</div></div><p>A node in a <code><a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstQueue">BestFirstQueue</a></code>.</p><ul class="structure_fields" id="BestFirstNode.mk"><li id="BestFirstNode.key" class="structure_field"><div class="structure_field_info">key : <span class="fn">α</span></div><div class="structure_field_doc"><p>The data to store at a node, from which we can calculate a priority using <code>prio</code>.</p></div></li><li id="BestFirstNode.estimator" class="structure_field"><div class="structure_field_info">estimator : <span class="fn"><span class="fn">ε</span> <span class="fn"><span class="fn">self</span>.<a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstNode.key">key</a></span></span></div><div class="structure_field_doc"><p>An estimator for the priority of the key.
(We will assume we have <code>[∀ a : α, <a href="../../.././Mathlib/Order/Estimator.html#Estimator">Estimator</a> (prio a) (ε a)]</code>.)</p></div></li></ul><details id="instances-for-list-BestFirstNode" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="BestFirstNode.estimate"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/90c0e186fd333cbdddbe0e5148aa3cd2d24dcf9a/Mathlib/Data/MLList/BestFirst.lean#L98-L99">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstNode.estimate"><span class="name">BestFirstNode</span>.<span class="name">estimate</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">ω </span><span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">prio</span> : <span class="fn"><span class="fn">α</span> → <span class="fn"><a href="../../.././Init/Core.html#Thunk">Thunk</a> <span class="fn">ω</span></span></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">ε</span> : <span class="fn"><span class="fn">α</span> → <a href="../../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Mathlib/Order/Defs/LinearOrder.html#LinearOrder">LinearOrder</a> <span class="fn">ω</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">(<span class="fn">a</span> : <span class="fn">α</span>) → <span class="fn"><a href="../../.././Mathlib/Order/Estimator.html#Estimator">Estimator</a> <span class="fn">(<span class="fn">prio</span> <span class="fn">a</span>)</span> <span class="fn">(<span class="fn">ε</span> <span class="fn">a</span>)</span></span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">n</span> : <span class="fn"><a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstNode">BestFirstNode</a> <span class="fn">prio</span> <span class="fn">ε</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn">ω</span></div></div><p>Calculate the current best lower bound for the priority of a node.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">n</span>.<a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstNode.estimate">estimate</a></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mathlib/Order/Estimator.html#EstimatorData.bound">EstimatorData.bound</a> <span class="fn">(<span class="fn">prio</span> <span class="fn"><span class="fn">n</span>.<a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstNode.key">key</a></span>)</span> <span class="fn"><span class="fn">n</span>.<a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstNode.estimator">estimator</a></span></span></li></ul></details><details id="instances-for-list-BestFirstNode.estimate" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="instOrdBestFirstNode"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/90c0e186fd333cbdddbe0e5148aa3cd2d24dcf9a/Mathlib/Data/MLList/BestFirst.lean#L101-L105">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Data/MLList/BestFirst.html#instOrdBestFirstNode"><span class="name">instOrdBestFirstNode</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">ω </span><span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">prio</span> : <span class="fn"><span class="fn">α</span> → <span class="fn"><a href="../../.././Init/Core.html#Thunk">Thunk</a> <span class="fn">ω</span></span></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">ε</span> : <span class="fn"><span class="fn">α</span> → <a href="../../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Mathlib/Order/Defs/LinearOrder.html#LinearOrder">LinearOrder</a> <span class="fn">ω</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">(<span class="fn">a</span> : <span class="fn">α</span>) → <span class="fn"><a href="../../.././Mathlib/Order/Estimator.html#Estimator">Estimator</a> <span class="fn">(<span class="fn">prio</span> <span class="fn">a</span>)</span> <span class="fn">(<span class="fn">ε</span> <span class="fn">a</span>)</span></span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Data/Ord.html#Ord">Ord</a> <span class="fn">ω</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Data/Ord.html#Ord">Ord</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Data/Ord.html#Ord">Ord</a> <span class="fn">(<a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstNode">BestFirstNode</a> <span class="fn">prio</span> <span class="fn">ε</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Mathlib/Data/MLList/BestFirst.html#instOrdBestFirstNode">instOrdBestFirstNode</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Data/Ord.html#Ord.mk">{</a> <span class="fn">compare</span> := <span class="fn"><a href="../../.././Init/Data/Ord.html#compareLex">compareLex</a> <span class="fn">(<a href="../../.././Init/Data/Ord.html#compareOn">compareOn</a> <a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstNode.estimate">BestFirstNode.estimate</a>)</span> <span class="fn">(<a href="../../.././Init/Data/Ord.html#compareOn">compareOn</a> <a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstNode.key">BestFirstNode.key</a>)</span></span> <a href="../../.././Init/Data/Ord.html#Ord.mk">}</a></li></ul></details></div></div><div class="decl" id="BestFirstQueue"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/90c0e186fd333cbdddbe0e5148aa3cd2d24dcf9a/Mathlib/Data/MLList/BestFirst.lean#L109-L111">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstQueue"><span class="name">BestFirstQueue</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">ω </span><span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">prio</span> : <span class="fn"><span class="fn">α</span> → <span class="fn"><a href="../../.././Init/Core.html#Thunk">Thunk</a> <span class="fn">ω</span></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">ε</span> : <span class="fn"><span class="fn">α</span> → <a href="../../.././foundational_types.html">Type</a></span>)</span></span>
<span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Mathlib/Order/Defs/LinearOrder.html#LinearOrder">LinearOrder</a> <span class="fn">ω</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">(<span class="fn">a</span> : <span class="fn">α</span>) → <span class="fn"><a href="../../.././Mathlib/Order/Estimator.html#Estimator">Estimator</a> <span class="fn">(<span class="fn">prio</span> <span class="fn">a</span>)</span> <span class="fn">(<span class="fn">ε</span> <span class="fn">a</span>)</span></span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">m</span> : <span class="fn"><a href="../../.././foundational_types.html">Type</a> → <a href="../../.././foundational_types.html">Type</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">β</span> : <a href="../../.././foundational_types.html">Type</a>)</span></span>
<span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Data/Ord.html#Ord">Ord</a> <span class="fn">ω</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Data/Ord.html#Ord">Ord</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">maxSize</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <a href="../../.././Init/Prelude.html#Nat">ℕ</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../.././foundational_types.html">Type</a></div></div><p>A queue of <code><a href="../../.././Batteries/Data/MLList/Basic.html#MLList">MLList</a> m β</code>s, lazily prioritized by lower bounds.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstQueue">BestFirstQueue</a> <span class="fn">prio</span> <span class="fn">ε</span> <span class="fn">m</span> <span class="fn">β</span> <span class="fn">maxSize</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Std/Data/TreeMap/Basic.html#Std.TreeMap">Std.TreeMap</a> <span class="fn">(<a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstNode">BestFirstNode</a> <span class="fn">prio</span> <span class="fn">ε</span>)</span> <span class="fn">(<a href="../../.././Batteries/Data/MLList/Basic.html#MLList">MLList</a> <span class="fn">m</span> <span class="fn">β</span>)</span> <a href="../../.././Init/Data/Ord.html#Ord.compare">compare</a></span></li></ul></details><details id="instances-for-list-BestFirstQueue" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="BestFirstQueue.insertAndEject"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/90c0e186fd333cbdddbe0e5148aa3cd2d24dcf9a/Mathlib/Data/MLList/BestFirst.lean#L117-L134">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstQueue.insertAndEject"><span class="name">BestFirstQueue</span>.<span class="name">insertAndEject</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">ω </span><span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">prio</span> : <span class="fn"><span class="fn">α</span> → <span class="fn"><a href="../../.././Init/Core.html#Thunk">Thunk</a> <span class="fn">ω</span></span></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">ε</span> : <span class="fn"><span class="fn">α</span> → <a href="../../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Mathlib/Order/Defs/LinearOrder.html#LinearOrder">LinearOrder</a> <span class="fn">ω</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">(<span class="fn">a</span> : <span class="fn">α</span>) → <span class="fn"><a href="../../.././Mathlib/Order/Estimator.html#Estimator">Estimator</a> <span class="fn">(<span class="fn">prio</span> <span class="fn">a</span>)</span> <span class="fn">(<span class="fn">ε</span> <span class="fn">a</span>)</span></span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">m</span> : <span class="fn"><a href="../../.././foundational_types.html">Type</a> → <a href="../../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">β</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Data/Ord.html#Ord">Ord</a> <span class="fn">ω</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Data/Ord.html#Ord">Ord</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">maxSize</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <a href="../../.././Init/Prelude.html#Nat">ℕ</a></span>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">q</span> : <span class="fn"><a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstQueue">BestFirstQueue</a> <span class="fn">prio</span> <span class="fn">ε</span> <span class="fn">m</span> <span class="fn">β</span> <span class="fn">maxSize</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">n</span> : <span class="fn"><a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstNode">BestFirstNode</a> <span class="fn">prio</span> <span class="fn">ε</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">l</span> : <span class="fn"><a href="../../.././Batteries/Data/MLList/Basic.html#MLList">MLList</a> <span class="fn">m</span> <span class="fn">β</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstQueue">BestFirstQueue</a> <span class="fn">prio</span> <span class="fn">ε</span> <span class="fn">m</span> <span class="fn">β</span> <span class="fn">maxSize</span></span></div></div><p>Add a new <code><a href="../../.././Batteries/Data/MLList/Basic.html#MLList">MLList</a> m β</code> to the <code><a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstQueue">BestFirstQueue</a></code>, and if this takes the size above <code>maxSize</code>,
eject a <code><a href="../../.././Batteries/Data/MLList/Basic.html#MLList">MLList</a></code> from the tail of the queue.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li><li class="equation"><span class="fn"><span class="fn"><span class="fn">q_2</span>.<a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstQueue.insertAndEject">insertAndEject</a></span> <span class="fn">n</span> <span class="fn">l</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Std/Data/TreeMap/Basic.html#Std.TreeMap.insert">Std.TreeMap.insert</a> <span class="fn">q_2</span> <span class="fn">n</span> <span class="fn">l</span></span></li></ul></details><details id="instances-for-list-BestFirstQueue.insertAndEject" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="BestFirstQueue.ensureFirstIsBest"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/90c0e186fd333cbdddbe0e5148aa3cd2d24dcf9a/Mathlib/Data/MLList/BestFirst.lean#L136-L165">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstQueue.ensureFirstIsBest"><span class="name">BestFirstQueue</span>.<span class="name">ensureFirstIsBest</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">ω </span><span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">prio</span> : <span class="fn"><span class="fn">α</span> → <span class="fn"><a href="../../.././Init/Core.html#Thunk">Thunk</a> <span class="fn">ω</span></span></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">ε</span> : <span class="fn"><span class="fn">α</span> → <a href="../../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Mathlib/Order/Defs/LinearOrder.html#LinearOrder">LinearOrder</a> <span class="fn">ω</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">(<span class="fn">a</span> : <span class="fn">α</span>) → <span class="fn"><a href="../../.././Mathlib/Order/Estimator.html#Estimator">Estimator</a> <span class="fn">(<span class="fn">prio</span> <span class="fn">a</span>)</span> <span class="fn">(<span class="fn">ε</span> <span class="fn">a</span>)</span></span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">I</span> : <span class="fn">∀ (<span class="fn">a</span> : <span class="fn">α</span>), <span class="fn"><a href="../../.././Mathlib/Order/RelClasses.html#WellFoundedGT">WellFoundedGT</a> <span class="fn">↑<span class="fn">(<a href="../../.././Mathlib/Data/Set/Operations.html#Set.range">Set.range</a> <span class="fn">(<a href="../../.././Mathlib/Order/Estimator.html#EstimatorData.bound">EstimatorData.bound</a> <span class="fn">(<span class="fn">prio</span> <span class="fn">a</span>)</span>)</span>)</span></span></span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">m</span> : <span class="fn"><a href="../../.././foundational_types.html">Type</a> → <a href="../../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">β</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Data/Ord.html#Ord">Ord</a> <span class="fn">ω</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Data/Ord.html#Ord">Ord</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">maxSize</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <a href="../../.././Init/Prelude.html#Nat">ℕ</a></span>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">q</span> : <span class="fn"><a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstQueue">BestFirstQueue</a> <span class="fn">prio</span> <span class="fn">ε</span> <span class="fn">m</span> <span class="fn">β</span> <span class="fn">maxSize</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">m</span> <span class="fn">(<a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstQueue">BestFirstQueue</a> <span class="fn">prio</span> <span class="fn">ε</span> <span class="fn">m</span> <span class="fn">β</span> <span class="fn">maxSize</span>)</span></span></div></div><p>By improving priority estimates as needed, and permuting elements,
ensure that the first element of the queue has the greatest priority.</p></div></div><div class="decl" id="BestFirstQueue.popWithBound"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/90c0e186fd333cbdddbe0e5148aa3cd2d24dcf9a/Mathlib/Data/MLList/BestFirst.lean#L167-L187">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstQueue.popWithBound"><span class="name">BestFirstQueue</span>.<span class="name">popWithBound</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">ω </span><span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">prio</span> : <span class="fn"><span class="fn">α</span> → <span class="fn"><a href="../../.././Init/Core.html#Thunk">Thunk</a> <span class="fn">ω</span></span></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">ε</span> : <span class="fn"><span class="fn">α</span> → <a href="../../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Mathlib/Order/Defs/LinearOrder.html#LinearOrder">LinearOrder</a> <span class="fn">ω</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">(<span class="fn">a</span> : <span class="fn">α</span>) → <span class="fn"><a href="../../.././Mathlib/Order/Estimator.html#Estimator">Estimator</a> <span class="fn">(<span class="fn">prio</span> <span class="fn">a</span>)</span> <span class="fn">(<span class="fn">ε</span> <span class="fn">a</span>)</span></span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">I</span> : <span class="fn">∀ (<span class="fn">a</span> : <span class="fn">α</span>), <span class="fn"><a href="../../.././Mathlib/Order/RelClasses.html#WellFoundedGT">WellFoundedGT</a> <span class="fn">↑<span class="fn">(<a href="../../.././Mathlib/Data/Set/Operations.html#Set.range">Set.range</a> <span class="fn">(<a href="../../.././Mathlib/Order/Estimator.html#EstimatorData.bound">EstimatorData.bound</a> <span class="fn">(<span class="fn">prio</span> <span class="fn">a</span>)</span>)</span>)</span></span></span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">m</span> : <span class="fn"><a href="../../.././foundational_types.html">Type</a> → <a href="../../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">β</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Data/Ord.html#Ord">Ord</a> <span class="fn">ω</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Data/Ord.html#Ord">Ord</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">maxSize</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <a href="../../.././Init/Prelude.html#Nat">ℕ</a></span>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">q</span> : <span class="fn"><a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstQueue">BestFirstQueue</a> <span class="fn">prio</span> <span class="fn">ε</span> <span class="fn">m</span> <span class="fn">β</span> <span class="fn">maxSize</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">m</span> <span class="fn">(<a href="../../.././Init/Prelude.html#Option">Option</a> (<span class="fn">((<span class="fn">a</span> : <span class="fn">α</span>) × <span class="fn"><span class="fn">ε</span> <span class="fn">a</span></span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn">β</span>)</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstQueue">BestFirstQueue</a> <span class="fn">prio</span> <span class="fn">ε</span> <span class="fn">m</span> <span class="fn">β</span> <span class="fn">maxSize</span></span>))</span></span></div></div><p>Pop a <code>β</code> off the <code><a href="../../.././Batteries/Data/MLList/Basic.html#MLList">MLList</a> m β</code> with lowest priority,
also returning the index in <code>α</code> and the current best lower bound for its priority.
This may require improving estimates of priorities and shuffling the queue.</p></div></div><div class="decl" id="BestFirstQueue.popWithPriority"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/90c0e186fd333cbdddbe0e5148aa3cd2d24dcf9a/Mathlib/Data/MLList/BestFirst.lean#L189-L197">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstQueue.popWithPriority"><span class="name">BestFirstQueue</span>.<span class="name">popWithPriority</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">ω </span><span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">prio</span> : <span class="fn"><span class="fn">α</span> → <span class="fn"><a href="../../.././Init/Core.html#Thunk">Thunk</a> <span class="fn">ω</span></span></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">ε</span> : <span class="fn"><span class="fn">α</span> → <a href="../../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Mathlib/Order/Defs/LinearOrder.html#LinearOrder">LinearOrder</a> <span class="fn">ω</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">(<span class="fn">a</span> : <span class="fn">α</span>) → <span class="fn"><a href="../../.././Mathlib/Order/Estimator.html#Estimator">Estimator</a> <span class="fn">(<span class="fn">prio</span> <span class="fn">a</span>)</span> <span class="fn">(<span class="fn">ε</span> <span class="fn">a</span>)</span></span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">I</span> : <span class="fn">∀ (<span class="fn">a</span> : <span class="fn">α</span>), <span class="fn"><a href="../../.././Mathlib/Order/RelClasses.html#WellFoundedGT">WellFoundedGT</a> <span class="fn">↑<span class="fn">(<a href="../../.././Mathlib/Data/Set/Operations.html#Set.range">Set.range</a> <span class="fn">(<a href="../../.././Mathlib/Order/Estimator.html#EstimatorData.bound">EstimatorData.bound</a> <span class="fn">(<span class="fn">prio</span> <span class="fn">a</span>)</span>)</span>)</span></span></span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">m</span> : <span class="fn"><a href="../../.././foundational_types.html">Type</a> → <a href="../../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">β</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Data/Ord.html#Ord">Ord</a> <span class="fn">ω</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Data/Ord.html#Ord">Ord</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">maxSize</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <a href="../../.././Init/Prelude.html#Nat">ℕ</a></span>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">q</span> : <span class="fn"><a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstQueue">BestFirstQueue</a> <span class="fn">prio</span> <span class="fn">ε</span> <span class="fn">m</span> <span class="fn">β</span> <span class="fn">maxSize</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">m</span> <span class="fn">(<a href="../../.././Init/Prelude.html#Option">Option</a> (((<span class="fn">α</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn">ω</span>) <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn">β</span>) <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstQueue">BestFirstQueue</a> <span class="fn">prio</span> <span class="fn">ε</span> <span class="fn">m</span> <span class="fn">β</span> <span class="fn">maxSize</span></span>))</span></span></div></div><p>Pop a <code>β</code> off the <code><a href="../../.././Batteries/Data/MLList/Basic.html#MLList">MLList</a> m β</code> with lowest priority,
also returning the index in <code>α</code> and the value of the current best lower bound for its priority.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">q</span>.<a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstQueue.popWithPriority">popWithPriority</a></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">__do_lift</span> ← <span class="fn"><span class="fn">q</span>.<a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstQueue.popWithBound">popWithBound</a></span>
  <span class="fn">match <span class="fn">__do_lift</span> with
    | <a href="../../.././Init/Prelude.html#Option.none">none</a> =&gt; <span class="fn"><a href="../../.././Init/Prelude.html#Pure.pure">pure</a> <a href="../../.././Init/Prelude.html#Option.none">none</a></span>
    | <span class="fn"><a href="../../.././Init/Prelude.html#Option.some">some</a> <a href="../../.././Init/Prelude.html#Prod.mk">(</a><a href="../../.././Init/Core.html#Sigma.mk">⟨</a><span class="fn">a</span>, <a href="../../.././Init/Prelude.html#Prod.mk">(</a><span class="fn">e</span><a href="../../.././Init/Prelude.html#Prod.mk">,</a> <span class="fn">b</span><a href="../../.././Init/Prelude.html#Prod.mk">)</a><a href="../../.././Init/Core.html#Sigma.mk">⟩</a><a href="../../.././Init/Prelude.html#Prod.mk">,</a> <span class="fn">q'</span><a href="../../.././Init/Prelude.html#Prod.mk">)</a></span> =&gt; <span class="fn"><a href="../../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">(<a href="../../.././Init/Prelude.html#Option.some">some</a> <a href="../../.././Init/Prelude.html#Prod.mk">(</a><a href="../../.././Init/Prelude.html#Prod.mk">(</a><a href="../../.././Init/Prelude.html#Prod.mk">(</a><span class="fn">a</span><a href="../../.././Init/Prelude.html#Prod.mk">,</a> <span class="fn"><a href="../../.././Mathlib/Order/Estimator.html#EstimatorData.bound">EstimatorData.bound</a> <span class="fn">(<span class="fn">prio</span> <span class="fn">a</span>)</span> <span class="fn">e</span></span><a href="../../.././Init/Prelude.html#Prod.mk">)</a><a href="../../.././Init/Prelude.html#Prod.mk">,</a> <span class="fn">b</span><a href="../../.././Init/Prelude.html#Prod.mk">)</a><a href="../../.././Init/Prelude.html#Prod.mk">,</a> <span class="fn">q'</span><a href="../../.././Init/Prelude.html#Prod.mk">)</a>)</span></span></span></span></li></ul></details><details id="instances-for-list-BestFirstQueue.popWithPriority" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="BestFirstQueue.pop"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/90c0e186fd333cbdddbe0e5148aa3cd2d24dcf9a/Mathlib/Data/MLList/BestFirst.lean#L199-L206">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstQueue.pop"><span class="name">BestFirstQueue</span>.<span class="name">pop</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">ω </span><span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">prio</span> : <span class="fn"><span class="fn">α</span> → <span class="fn"><a href="../../.././Init/Core.html#Thunk">Thunk</a> <span class="fn">ω</span></span></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">ε</span> : <span class="fn"><span class="fn">α</span> → <a href="../../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Mathlib/Order/Defs/LinearOrder.html#LinearOrder">LinearOrder</a> <span class="fn">ω</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">(<span class="fn">a</span> : <span class="fn">α</span>) → <span class="fn"><a href="../../.././Mathlib/Order/Estimator.html#Estimator">Estimator</a> <span class="fn">(<span class="fn">prio</span> <span class="fn">a</span>)</span> <span class="fn">(<span class="fn">ε</span> <span class="fn">a</span>)</span></span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">I</span> : <span class="fn">∀ (<span class="fn">a</span> : <span class="fn">α</span>), <span class="fn"><a href="../../.././Mathlib/Order/RelClasses.html#WellFoundedGT">WellFoundedGT</a> <span class="fn">↑<span class="fn">(<a href="../../.././Mathlib/Data/Set/Operations.html#Set.range">Set.range</a> <span class="fn">(<a href="../../.././Mathlib/Order/Estimator.html#EstimatorData.bound">EstimatorData.bound</a> <span class="fn">(<span class="fn">prio</span> <span class="fn">a</span>)</span>)</span>)</span></span></span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">m</span> : <span class="fn"><a href="../../.././foundational_types.html">Type</a> → <a href="../../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">β</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Data/Ord.html#Ord">Ord</a> <span class="fn">ω</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Data/Ord.html#Ord">Ord</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">maxSize</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <a href="../../.././Init/Prelude.html#Nat">ℕ</a></span>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">q</span> : <span class="fn"><a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstQueue">BestFirstQueue</a> <span class="fn">prio</span> <span class="fn">ε</span> <span class="fn">m</span> <span class="fn">β</span> <span class="fn">maxSize</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">m</span> <span class="fn">(<a href="../../.././Init/Prelude.html#Option">Option</a> ((<span class="fn">α</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn">β</span>) <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstQueue">BestFirstQueue</a> <span class="fn">prio</span> <span class="fn">ε</span> <span class="fn">m</span> <span class="fn">β</span> <span class="fn">maxSize</span></span>))</span></span></div></div><p>Pop a <code>β</code> off the <code><a href="../../.././Batteries/Data/MLList/Basic.html#MLList">MLList</a> m β</code> with lowest priority.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">q</span>.<a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstQueue.pop">pop</a></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">__do_lift</span> ← <span class="fn"><span class="fn">q</span>.<a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstQueue.popWithBound">popWithBound</a></span>
  <span class="fn">match <span class="fn">__do_lift</span> with
    | <a href="../../.././Init/Prelude.html#Option.none">none</a> =&gt; <span class="fn"><a href="../../.././Init/Prelude.html#Pure.pure">pure</a> <a href="../../.././Init/Prelude.html#Option.none">none</a></span>
    | <span class="fn"><a href="../../.././Init/Prelude.html#Option.some">some</a> <a href="../../.././Init/Prelude.html#Prod.mk">(</a><a href="../../.././Init/Core.html#Sigma.mk">⟨</a><span class="fn">a</span>, <a href="../../.././Init/Prelude.html#Prod.mk">(</a><span class="fn">fst</span><a href="../../.././Init/Prelude.html#Prod.mk">,</a> <span class="fn">b</span><a href="../../.././Init/Prelude.html#Prod.mk">)</a><a href="../../.././Init/Core.html#Sigma.mk">⟩</a><a href="../../.././Init/Prelude.html#Prod.mk">,</a> <span class="fn">q'</span><a href="../../.././Init/Prelude.html#Prod.mk">)</a></span> =&gt; <span class="fn"><a href="../../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">(<a href="../../.././Init/Prelude.html#Option.some">some</a> <a href="../../.././Init/Prelude.html#Prod.mk">(</a><a href="../../.././Init/Prelude.html#Prod.mk">(</a><span class="fn">a</span><a href="../../.././Init/Prelude.html#Prod.mk">,</a> <span class="fn">b</span><a href="../../.././Init/Prelude.html#Prod.mk">)</a><a href="../../.././Init/Prelude.html#Prod.mk">,</a> <span class="fn">q'</span><a href="../../.././Init/Prelude.html#Prod.mk">)</a>)</span></span></span></span></li></ul></details><details id="instances-for-list-BestFirstQueue.pop" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="BestFirstQueue.toMLListWithPriority"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/90c0e186fd333cbdddbe0e5148aa3cd2d24dcf9a/Mathlib/Data/MLList/BestFirst.lean#L208-L217">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstQueue.toMLListWithPriority"><span class="name">BestFirstQueue</span>.<span class="name">toMLListWithPriority</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">ω </span><span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">prio</span> : <span class="fn"><span class="fn">α</span> → <span class="fn"><a href="../../.././Init/Core.html#Thunk">Thunk</a> <span class="fn">ω</span></span></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">ε</span> : <span class="fn"><span class="fn">α</span> → <a href="../../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Mathlib/Order/Defs/LinearOrder.html#LinearOrder">LinearOrder</a> <span class="fn">ω</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">(<span class="fn">a</span> : <span class="fn">α</span>) → <span class="fn"><a href="../../.././Mathlib/Order/Estimator.html#Estimator">Estimator</a> <span class="fn">(<span class="fn">prio</span> <span class="fn">a</span>)</span> <span class="fn">(<span class="fn">ε</span> <span class="fn">a</span>)</span></span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">I</span> : <span class="fn">∀ (<span class="fn">a</span> : <span class="fn">α</span>), <span class="fn"><a href="../../.././Mathlib/Order/RelClasses.html#WellFoundedGT">WellFoundedGT</a> <span class="fn">↑<span class="fn">(<a href="../../.././Mathlib/Data/Set/Operations.html#Set.range">Set.range</a> <span class="fn">(<a href="../../.././Mathlib/Order/Estimator.html#EstimatorData.bound">EstimatorData.bound</a> <span class="fn">(<span class="fn">prio</span> <span class="fn">a</span>)</span>)</span>)</span></span></span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">m</span> : <span class="fn"><a href="../../.././foundational_types.html">Type</a> → <a href="../../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">β</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Data/Ord.html#Ord">Ord</a> <span class="fn">ω</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Data/Ord.html#Ord">Ord</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">maxSize</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <a href="../../.././Init/Prelude.html#Nat">ℕ</a></span>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">q</span> : <span class="fn"><a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstQueue">BestFirstQueue</a> <span class="fn">prio</span> <span class="fn">ε</span> <span class="fn">m</span> <span class="fn">β</span> <span class="fn">maxSize</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Batteries/Data/MLList/Basic.html#MLList">MLList</a> <span class="fn">m</span> ((<span class="fn">α</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn">ω</span>) <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn">β</span>)</span></div></div><p>Convert a <code><a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstQueue">BestFirstQueue</a></code> to a <code><a href="../../.././Batteries/Data/MLList/Basic.html#MLList">MLList</a> ((α × ω) × β)</code>, by popping off all elements,
recording also the values in <code>ω</code> of the best current lower bounds.</p></div></div><div class="decl" id="BestFirstQueue.toMLList"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/90c0e186fd333cbdddbe0e5148aa3cd2d24dcf9a/Mathlib/Data/MLList/BestFirst.lean#L219-L223">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstQueue.toMLList"><span class="name">BestFirstQueue</span>.<span class="name">toMLList</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">ω </span><span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">prio</span> : <span class="fn"><span class="fn">α</span> → <span class="fn"><a href="../../.././Init/Core.html#Thunk">Thunk</a> <span class="fn">ω</span></span></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">ε</span> : <span class="fn"><span class="fn">α</span> → <a href="../../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Mathlib/Order/Defs/LinearOrder.html#LinearOrder">LinearOrder</a> <span class="fn">ω</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">(<span class="fn">a</span> : <span class="fn">α</span>) → <span class="fn"><a href="../../.././Mathlib/Order/Estimator.html#Estimator">Estimator</a> <span class="fn">(<span class="fn">prio</span> <span class="fn">a</span>)</span> <span class="fn">(<span class="fn">ε</span> <span class="fn">a</span>)</span></span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">I</span> : <span class="fn">∀ (<span class="fn">a</span> : <span class="fn">α</span>), <span class="fn"><a href="../../.././Mathlib/Order/RelClasses.html#WellFoundedGT">WellFoundedGT</a> <span class="fn">↑<span class="fn">(<a href="../../.././Mathlib/Data/Set/Operations.html#Set.range">Set.range</a> <span class="fn">(<a href="../../.././Mathlib/Order/Estimator.html#EstimatorData.bound">EstimatorData.bound</a> <span class="fn">(<span class="fn">prio</span> <span class="fn">a</span>)</span>)</span>)</span></span></span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">m</span> : <span class="fn"><a href="../../.././foundational_types.html">Type</a> → <a href="../../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">β</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Data/Ord.html#Ord">Ord</a> <span class="fn">ω</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Data/Ord.html#Ord">Ord</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">maxSize</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <a href="../../.././Init/Prelude.html#Nat">ℕ</a></span>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">q</span> : <span class="fn"><a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstQueue">BestFirstQueue</a> <span class="fn">prio</span> <span class="fn">ε</span> <span class="fn">m</span> <span class="fn">β</span> <span class="fn">maxSize</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Batteries/Data/MLList/Basic.html#MLList">MLList</a> <span class="fn">m</span> (<span class="fn">α</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn">β</span>)</span></div></div><p>Convert a <code><a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstQueue">BestFirstQueue</a></code> to a <code><a href="../../.././Batteries/Data/MLList/Basic.html#MLList">MLList</a> (α × β)</code>, by popping off all elements.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">q</span>.<a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstQueue.toMLList">toMLList</a></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Batteries/Data/MLList/Basic.html#MLList.map">MLList.map</a> <span class="fn">(fun (<span class="fn">t</span> : (<span class="fn">α</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn">ω</span>) <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn">β</span>) =&gt; <a href="../../.././Init/Prelude.html#Prod.mk">(</a><span class="fn"><span class="fn"><span class="fn">t</span>.1</span>.1</span><a href="../../.././Init/Prelude.html#Prod.mk">,</a> <span class="fn"><span class="fn">t</span>.2</span><a href="../../.././Init/Prelude.html#Prod.mk">)</a>)</span> <span class="fn"><span class="fn">q</span>.<a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstQueue.toMLListWithPriority">toMLListWithPriority</a></span></span></li></ul></details><details id="instances-for-list-BestFirstQueue.toMLList" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="impl"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/90c0e186fd333cbdddbe0e5148aa3cd2d24dcf9a/Mathlib/Data/MLList/BestFirst.lean#L231-L248">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Data/MLList/BestFirst.html#impl"><span class="name">impl</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">ω </span><span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">prio</span> : <span class="fn"><span class="fn">α</span> → <span class="fn"><a href="../../.././Init/Core.html#Thunk">Thunk</a> <span class="fn">ω</span></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">ε</span> : <span class="fn"><span class="fn">α</span> → <a href="../../.././foundational_types.html">Type</a></span>)</span></span>
<span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Mathlib/Order/Defs/LinearOrder.html#LinearOrder">LinearOrder</a> <span class="fn">ω</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">(<span class="fn">a</span> : <span class="fn">α</span>) → <span class="fn"><a href="../../.././Mathlib/Order/Estimator.html#Estimator">Estimator</a> <span class="fn">(<span class="fn">prio</span> <span class="fn">a</span>)</span> <span class="fn">(<span class="fn">ε</span> <span class="fn">a</span>)</span></span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">I</span> : <span class="fn">∀ (<span class="fn">a</span> : <span class="fn">α</span>), <span class="fn"><a href="../../.././Mathlib/Order/RelClasses.html#WellFoundedGT">WellFoundedGT</a> <span class="fn">↑<span class="fn">(<a href="../../.././Mathlib/Data/Set/Operations.html#Set.range">Set.range</a> <span class="fn">(<a href="../../.././Mathlib/Order/Estimator.html#EstimatorData.bound">EstimatorData.bound</a> <span class="fn">(<span class="fn">prio</span> <span class="fn">a</span>)</span>)</span>)</span></span></span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Data/Ord.html#Ord">Ord</a> <span class="fn">ω</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Data/Ord.html#Ord">Ord</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">m</span> : <span class="fn"><a href="../../.././foundational_types.html">Type</a> → <a href="../../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Control/Basic.html#Alternative">Alternative</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">(<span class="fn">a</span> : <span class="fn">α</span>) → <span class="fn"><a href="../../.././Mathlib/Order/Notation.html#Bot">Bot</a> <span class="fn">(<span class="fn">ε</span> <span class="fn">a</span>)</span></span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">maxSize</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <a href="../../.././Init/Prelude.html#Nat">ℕ</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><span class="fn">α</span> → <span class="fn"><a href="../../.././Batteries/Data/MLList/Basic.html#MLList">MLList</a> <span class="fn">m</span> <span class="fn">α</span></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">a</span> : <span class="fn">α</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Batteries/Data/MLList/Basic.html#MLList">MLList</a> <span class="fn">m</span> <span class="fn">α</span></span></div></div><p>Core implementation of <code><a href="../../.././Mathlib/Data/MLList/BestFirst.html#bestFirstSearch">bestFirstSearch</a></code>, that works by iteratively updating an internal state,
consisting of a priority queue of <code><a href="../../.././Batteries/Data/MLList/Basic.html#MLList">MLList</a> m α</code>.</p><p>At each step we pop an element off the queue,
compute its children (lazily) and put these back on the queue.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Mathlib/Data/MLList/BestFirst.html#impl">impl</a> <span class="fn">prio</span> <span class="fn">ε</span> <span class="fn">maxSize</span> <span class="fn">f</span> <span class="fn">a</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../.././Batteries/Data/MLList/Basic.html#MLList.cons">MLList.cons</a> <span class="fn">a</span>
    <span class="fn">(<span class="fn"><span class="fn">(<a href="../../.././Batteries/Data/MLList/Basic.html#MLList.iterate">MLList.iterate</a> <span class="fn">(<a href="../../.././Mathlib/Data/MLList/BestFirst.html#impl.go">impl.go</a> <span class="fn">prio</span> <span class="fn">ε</span> <span class="fn">maxSize</span> <span class="fn">f</span>)</span>)</span>.<a href="../../.././Batteries/Data/MLList/Basic.html#MLList.runState'">runState'</a></span>
      <span class="fn">(<span class="fn"><a href="../../.././Std/Data/TreeMap/Basic.html#Std.TreeMap.empty">Std.TreeMap.empty</a>.<a href="../../.././Std/Data/TreeMap/Basic.html#Std.TreeMap.insert">insert</a></span> <a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstNode.mk">{</a> <span class="fn">key</span> := <span class="fn">a</span>, <span class="fn">estimator</span> := <a href="../../.././Mathlib/Order/Notation.html#Bot.bot">⊥</a> <a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstNode.mk">}</a> <span class="fn">(<span class="fn">f</span> <span class="fn">a</span>)</span>)</span>)</span></span></li></ul></details><details id="instances-for-list-impl" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="impl.go"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/90c0e186fd333cbdddbe0e5148aa3cd2d24dcf9a/Mathlib/Data/MLList/BestFirst.lean#L245-L248">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Data/MLList/BestFirst.html#impl.go"><span class="name">impl</span>.<span class="name">go</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">ω </span><span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">prio</span> : <span class="fn"><span class="fn">α</span> → <span class="fn"><a href="../../.././Init/Core.html#Thunk">Thunk</a> <span class="fn">ω</span></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">ε</span> : <span class="fn"><span class="fn">α</span> → <a href="../../.././foundational_types.html">Type</a></span>)</span></span>
<span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Mathlib/Order/Defs/LinearOrder.html#LinearOrder">LinearOrder</a> <span class="fn">ω</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">(<span class="fn">a</span> : <span class="fn">α</span>) → <span class="fn"><a href="../../.././Mathlib/Order/Estimator.html#Estimator">Estimator</a> <span class="fn">(<span class="fn">prio</span> <span class="fn">a</span>)</span> <span class="fn">(<span class="fn">ε</span> <span class="fn">a</span>)</span></span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">I</span> : <span class="fn">∀ (<span class="fn">a</span> : <span class="fn">α</span>), <span class="fn"><a href="../../.././Mathlib/Order/RelClasses.html#WellFoundedGT">WellFoundedGT</a> <span class="fn">↑<span class="fn">(<a href="../../.././Mathlib/Data/Set/Operations.html#Set.range">Set.range</a> <span class="fn">(<a href="../../.././Mathlib/Order/Estimator.html#EstimatorData.bound">EstimatorData.bound</a> <span class="fn">(<span class="fn">prio</span> <span class="fn">a</span>)</span>)</span>)</span></span></span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Data/Ord.html#Ord">Ord</a> <span class="fn">ω</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Data/Ord.html#Ord">Ord</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">m</span> : <span class="fn"><a href="../../.././foundational_types.html">Type</a> → <a href="../../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Control/Basic.html#Alternative">Alternative</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">(<span class="fn">a</span> : <span class="fn">α</span>) → <span class="fn"><a href="../../.././Mathlib/Order/Notation.html#Bot">Bot</a> <span class="fn">(<span class="fn">ε</span> <span class="fn">a</span>)</span></span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">maxSize</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <a href="../../.././Init/Prelude.html#Nat">ℕ</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><span class="fn">α</span> → <span class="fn"><a href="../../.././Batteries/Data/MLList/Basic.html#MLList">MLList</a> <span class="fn">m</span> <span class="fn">α</span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn"><a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstQueue">BestFirstQueue</a> <span class="fn">prio</span> <span class="fn">ε</span> <span class="fn">m</span> <span class="fn">α</span> <span class="fn">maxSize</span></span> → <span class="fn"><span class="fn">m</span> (<span class="fn">α</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstQueue">BestFirstQueue</a> <span class="fn">prio</span> <span class="fn">ε</span> <span class="fn">m</span> <span class="fn">α</span> <span class="fn">maxSize</span></span>)</span></span></div></div><p>A single step of the best first search.
Pop an element, and insert its children back into the queue,
with a trivial estimator for their priority.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Mathlib/Data/MLList/BestFirst.html#impl.go">impl.go</a> <span class="fn">prio</span> <span class="fn">ε</span> <span class="fn">maxSize</span> <span class="fn">f</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">__do_lift</span> ← <span class="fn"><span class="fn">s</span>.<a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstQueue.pop">pop</a></span>
  <span class="fn">match <span class="fn">__do_lift</span> with
    | <a href="../../.././Init/Prelude.html#Option.none">none</a> =&gt; <a href="../../.././Init/Control/Basic.html#Alternative.failure">failure</a>
    | <span class="fn"><a href="../../.././Init/Prelude.html#Option.some">some</a> <a href="../../.././Init/Prelude.html#Prod.mk">(</a><a href="../../.././Init/Prelude.html#Prod.mk">(</a><span class="fn">fst</span><a href="../../.././Init/Prelude.html#Prod.mk">,</a> <span class="fn">b</span><a href="../../.././Init/Prelude.html#Prod.mk">)</a><a href="../../.././Init/Prelude.html#Prod.mk">,</a> <span class="fn">s'</span><a href="../../.././Init/Prelude.html#Prod.mk">)</a></span> =&gt; <span class="fn"><a href="../../.././Init/Prelude.html#Pure.pure">pure</a> <a href="../../.././Init/Prelude.html#Prod.mk">(</a><span class="fn">b</span><a href="../../.././Init/Prelude.html#Prod.mk">,</a> <span class="fn"><span class="fn"><span class="fn">s'</span>.<a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstQueue.insertAndEject">insertAndEject</a></span> <a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstNode.mk">{</a> <span class="fn">key</span> := <span class="fn">b</span>, <span class="fn">estimator</span> := <a href="../../.././Mathlib/Order/Notation.html#Bot.bot">⊥</a> <a href="../../.././Mathlib/Data/MLList/BestFirst.html#BestFirstNode.mk">}</a> <span class="fn">(<span class="fn">f</span> <span class="fn">b</span>)</span></span><a href="../../.././Init/Prelude.html#Prod.mk">)</a></span></span></span></li></ul></details><details id="instances-for-list-impl.go" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="implMaxDepth"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/90c0e186fd333cbdddbe0e5148aa3cd2d24dcf9a/Mathlib/Data/MLList/BestFirst.lean#L250-L263">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Data/MLList/BestFirst.html#implMaxDepth"><span class="name">implMaxDepth</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">ω </span><span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">prio</span> : <span class="fn"><span class="fn">α</span> → <span class="fn"><a href="../../.././Init/Core.html#Thunk">Thunk</a> <span class="fn">ω</span></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">ε</span> : <span class="fn"><span class="fn">α</span> → <a href="../../.././foundational_types.html">Type</a></span>)</span></span>
<span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Mathlib/Order/Defs/LinearOrder.html#LinearOrder">LinearOrder</a> <span class="fn">ω</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">(<span class="fn">a</span> : <span class="fn">α</span>) → <span class="fn"><a href="../../.././Mathlib/Order/Estimator.html#Estimator">Estimator</a> <span class="fn">(<span class="fn">prio</span> <span class="fn">a</span>)</span> <span class="fn">(<span class="fn">ε</span> <span class="fn">a</span>)</span></span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">I</span> : <span class="fn">∀ (<span class="fn">a</span> : <span class="fn">α</span>), <span class="fn"><a href="../../.././Mathlib/Order/RelClasses.html#WellFoundedGT">WellFoundedGT</a> <span class="fn">↑<span class="fn">(<a href="../../.././Mathlib/Data/Set/Operations.html#Set.range">Set.range</a> <span class="fn">(<a href="../../.././Mathlib/Order/Estimator.html#EstimatorData.bound">EstimatorData.bound</a> <span class="fn">(<span class="fn">prio</span> <span class="fn">a</span>)</span>)</span>)</span></span></span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Data/Ord.html#Ord">Ord</a> <span class="fn">ω</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Data/Ord.html#Ord">Ord</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">m</span> : <span class="fn"><a href="../../.././foundational_types.html">Type</a> → <a href="../../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Control/Basic.html#Alternative">Alternative</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">(<span class="fn">a</span> : <span class="fn">α</span>) → <span class="fn"><a href="../../.././Mathlib/Order/Notation.html#Bot">Bot</a> <span class="fn">(<span class="fn">ε</span> <span class="fn">a</span>)</span></span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">maxSize </span><span class="fn">maxDepth</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <a href="../../.././Init/Prelude.html#Nat">ℕ</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><span class="fn">α</span> → <span class="fn"><a href="../../.././Batteries/Data/MLList/Basic.html#MLList">MLList</a> <span class="fn">m</span> <span class="fn">α</span></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">a</span> : <span class="fn">α</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Batteries/Data/MLList/Basic.html#MLList">MLList</a> <span class="fn">m</span> <span class="fn">α</span></span></div></div><p>Wrapper for <code><a href="../../.././Mathlib/Data/MLList/BestFirst.html#impl">impl</a></code> implementing the <code>maxDepth</code> option.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li><li class="equation"><span class="fn"><a href="../../.././Mathlib/Data/MLList/BestFirst.html#implMaxDepth">implMaxDepth</a> <span class="fn">prio</span> <span class="fn">ε</span> <span class="fn">maxSize</span> <a href="../../.././Init/Prelude.html#Option.none">none</a> <span class="fn">f</span> <span class="fn">a</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mathlib/Data/MLList/BestFirst.html#impl">impl</a> <span class="fn">prio</span> <span class="fn">ε</span> <span class="fn">maxSize</span> <span class="fn">f</span> <span class="fn">a</span></span></li></ul></details><details id="instances-for-list-implMaxDepth" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="bestFirstSearchCore"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/90c0e186fd333cbdddbe0e5148aa3cd2d24dcf9a/Mathlib/Data/MLList/BestFirst.lean#L265-L302">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Data/MLList/BestFirst.html#bestFirstSearchCore"><span class="name">bestFirstSearchCore</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">ω </span><span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">prio</span> : <span class="fn"><span class="fn">α</span> → <span class="fn"><a href="../../.././Init/Core.html#Thunk">Thunk</a> <span class="fn">ω</span></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">ε</span> : <span class="fn"><span class="fn">α</span> → <a href="../../.././foundational_types.html">Type</a></span>)</span></span>
<span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Mathlib/Order/Defs/LinearOrder.html#LinearOrder">LinearOrder</a> <span class="fn">ω</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">(<span class="fn">a</span> : <span class="fn">α</span>) → <span class="fn"><a href="../../.././Mathlib/Order/Estimator.html#Estimator">Estimator</a> <span class="fn">(<span class="fn">prio</span> <span class="fn">a</span>)</span> <span class="fn">(<span class="fn">ε</span> <span class="fn">a</span>)</span></span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">I</span> : <span class="fn">∀ (<span class="fn">a</span> : <span class="fn">α</span>), <span class="fn"><a href="../../.././Mathlib/Order/RelClasses.html#WellFoundedGT">WellFoundedGT</a> <span class="fn">↑<span class="fn">(<a href="../../.././Mathlib/Data/Set/Operations.html#Set.range">Set.range</a> <span class="fn">(<a href="../../.././Mathlib/Order/Estimator.html#EstimatorData.bound">EstimatorData.bound</a> <span class="fn">(<span class="fn">prio</span> <span class="fn">a</span>)</span>)</span>)</span></span></span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Data/Ord.html#Ord">Ord</a> <span class="fn">ω</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Data/Ord.html#Ord">Ord</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">m</span> : <span class="fn"><a href="../../.././foundational_types.html">Type</a> → <a href="../../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Control/Basic.html#Alternative">Alternative</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">(<span class="fn">a</span> : <span class="fn">α</span>) → <span class="fn"><a href="../../.././Mathlib/Order/Notation.html#Bot">Bot</a> <span class="fn">(<span class="fn">ε</span> <span class="fn">a</span>)</span></span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><span class="fn">α</span> → <span class="fn"><a href="../../.././Batteries/Data/MLList/Basic.html#MLList">MLList</a> <span class="fn">m</span> <span class="fn">α</span></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">a</span> : <span class="fn">α</span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">β</span> : <a href="../../.././foundational_types.html">Type</a>)</span></span>
<span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Data/Ord.html#Ord">Ord</a> <span class="fn">β</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">removeDuplicatesBy?</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <span class="fn">(<span class="fn">α</span> → <span class="fn">β</span>)</span></span> := <a href="../../.././Init/Prelude.html#Option.none">none</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">maxQueued </span><span class="fn">maxDepth</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <a href="../../.././Init/Prelude.html#Nat">ℕ</a></span> := <a href="../../.././Init/Prelude.html#Option.none">none</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Batteries/Data/MLList/Basic.html#MLList">MLList</a> <span class="fn">m</span> <span class="fn">α</span></span></div></div><p>A lazy list recording the best first search of a graph generated by a function
<code>f : α → <a href="../../.././Batteries/Data/MLList/Basic.html#MLList">MLList</a> m α</code>.</p><p>We maintain a priority queue of visited-but-not-exhausted nodes,
and at each step take the next child of the highest priority node in the queue.</p><p>The option <code>maxDepth</code> limits the search depth.</p><p>The option <code>maxQueued</code> bounds the size of the priority queue,
discarding the lowest priority nodes as needed.
This implements a &quot;beam&quot; search, which may be incomplete but uses bounded memory.</p><p>The option <code>removeDuplicates</code> keeps an <code>RBSet</code> of previously visited nodes.
Otherwise, if the graph is not a tree then nodes will be visited multiple times.</p><p>This version allows specifying a custom priority function <code>prio : α → <a href="../../.././Init/Core.html#Thunk">Thunk</a> ω</code>
along with estimators <code>ε : α → Type</code> equipped with <code>[∀ a, <a href="../../.././Mathlib/Order/Estimator.html#Estimator">Estimator</a> (prio a) (ε a)]</code>
that control the behaviour of the priority queue.
This function returns values <code>a : α</code> that have
the lowest possible <code>prio a</code> amongst unvisited neighbours of visited nodes,
but lazily estimates these priorities to avoid unnecessary computations.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li><li class="equation"><span class="fn"><a href="../../.././Mathlib/Data/MLList/BestFirst.html#bestFirstSearchCore">bestFirstSearchCore</a> <span class="fn">prio</span> <span class="fn">ε</span> <span class="fn">f</span> <span class="fn">a</span> <span class="fn">β</span> <a href="../../.././Init/Prelude.html#Option.none">none</a> <span class="fn">maxQueued</span> <span class="fn">maxDepth</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mathlib/Data/MLList/BestFirst.html#implMaxDepth">implMaxDepth</a> <span class="fn">prio</span> <span class="fn">ε</span> <span class="fn">maxQueued</span> <span class="fn">maxDepth</span> <span class="fn">f</span> <span class="fn">a</span></span></li></ul></details><details id="instances-for-list-bestFirstSearchCore" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="instOrderBotEq"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/90c0e186fd333cbdddbe0e5148aa3cd2d24dcf9a/Mathlib/Data/MLList/BestFirst.lean#L308-L312">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Data/MLList/BestFirst.html#instOrderBotEq"><span class="name">instOrderBotEq</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Mathlib/Order/Defs/LinearOrder.html#LinearOrder">LinearOrder</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">a</span> : <span class="fn">α</span>}</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Mathlib/Order/BoundedOrder/Basic.html#OrderBot">OrderBot</a> <a href="../../.././Init/Prelude.html#Subtype">{</a> <span class="fn">x</span> <a href="../../.././Init/Prelude.html#Subtype">:</a> <span class="fn">α</span> <a href="../../.././Init/Prelude.html#Subtype">//</a> <span class="fn">x</span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">a</span> <a href="../../.././Init/Prelude.html#Subtype">}</a></span></div></div><p>A local instance that enables using &quot;the actual value&quot; as a priority estimator,
for simple use cases.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Mathlib/Data/MLList/BestFirst.html#instOrderBotEq">instOrderBotEq</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Mathlib/Order/BoundedOrder/Basic.html#OrderBot.mk">{</a> <span class="fn">bot</span> := <a href="../../.././Init/Prelude.html#Subtype.mk">⟨</a><span class="fn">a</span>, <span class="fn">⋯</span><a href="../../.././Init/Prelude.html#Subtype.mk">⟩</a>, <span class="fn">bot_le</span> := <span class="fn">⋯</span> <a href="../../.././Mathlib/Order/BoundedOrder/Basic.html#OrderBot.mk">}</a></li></ul></details><details id="instances-for-list-instOrderBotEq" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="bestFirstSearch"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/90c0e186fd333cbdddbe0e5148aa3cd2d24dcf9a/Mathlib/Data/MLList/BestFirst.lean#L314-L340">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Data/MLList/BestFirst.html#bestFirstSearch"><span class="name">bestFirstSearch</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">m</span> : <span class="fn"><a href="../../.././foundational_types.html">Type</a> → <a href="../../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Control/Basic.html#Alternative">Alternative</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Mathlib/Order/Defs/LinearOrder.html#LinearOrder">LinearOrder</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><span class="fn">α</span> → <span class="fn"><a href="../../.././Batteries/Data/MLList/Basic.html#MLList">MLList</a> <span class="fn">m</span> <span class="fn">α</span></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">a</span> : <span class="fn">α</span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">maxQueued </span><span class="fn">maxDepth</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <a href="../../.././Init/Prelude.html#Nat">ℕ</a></span> := <a href="../../.././Init/Prelude.html#Option.none">none</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">removeDuplicates</span> : <a href="../../.././Init/Prelude.html#Bool">Bool</a> := <a href="../../.././Init/Prelude.html#Bool.true">true</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Batteries/Data/MLList/Basic.html#MLList">MLList</a> <span class="fn">m</span> <span class="fn">α</span></span></div></div><p>A lazy list recording the best first search of a graph generated by a function
<code>f : α → <a href="../../.././Batteries/Data/MLList/Basic.html#MLList">MLList</a> m α</code>.</p><p>We maintain a priority queue of visited-but-not-exhausted nodes,
and at each step take the next child of the highest priority node in the queue.</p><p>The option <code>maxDepth</code> limits the search depth.</p><p>The option <code>maxQueued</code> bounds the size of the priority queue,
discarding the lowest priority nodes as needed.
This implements a &quot;beam&quot; search, which may be incomplete but uses bounded memory.</p><p>The option <code>removeDuplicates</code> keeps an <code>RBSet</code> of previously visited nodes.
Otherwise, if the graph is not a tree then nodes will be visited multiple times.</p><p>This function returns values <code>a : α</code> that are least in the <code>[LinearOrder α]</code>
amongst unvisited neighbours of visited nodes.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-bestFirstSearch" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div></main>
<nav class="nav"><iframe src="../../.././navbar.html" class="navframe" frameBorder="0"></iframe></nav></body></html>